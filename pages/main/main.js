"use strict";
Page({
    onShareAppMessage: function () {
        return {
            title: '听个戏吧',
            path: 'pages/main'
        };
    },
    data: {
        currentOperaIndex: 0,
        operas: []
    },
    onLoad: function () {
        var _this = this;
        var initOperas = [];
        for (var i = 0; i < 5; i++) {
            initOperas.push({
                title: '黄梅戏' + i,
                link: 'http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400',
                context: wx.createVideoContext("opera-" + i)
            });
        }
        this.setData({ operas: initOperas }, function () {
            _this.data.operas[0].context.play();
        });
    },
    switchToNextVideo: function (nextIndex) {
        var _this = this;
        var prevIndex = this.data.currentOperaIndex;
        this.data.operas[prevIndex].context.seek(0);
        this.data.operas[prevIndex].context.pause();
        this.setData({
            currentOperaIndex: nextIndex
        }, function () {
            _this.data.operas[nextIndex].context.play();
        });
    },
    onSwiperChange: function (e) {
        this.switchToNextVideo(e.detail.current);
    },
    onVideoEnded: function () {
        this.switchToNextVideo(this.data.currentOperaIndex + 1);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQWtCQSxJQUFJLENBQW1CO0lBQ3JCLGlCQUFpQjtRQUNmLE9BQU87WUFDTCxLQUFLLEVBQUUsTUFBTTtZQUNiLElBQUksRUFBRSxZQUFZO1NBQ25CLENBQUE7SUFDSCxDQUFDO0lBRUQsSUFBSSxFQUFFO1FBQ0osaUJBQWlCLEVBQUUsQ0FBQztRQUNwQixNQUFNLEVBQUUsRUFBRTtLQUNYO0lBRUQsTUFBTTtRQUFOLGlCQWNDO1FBWkMsSUFBTSxVQUFVLEdBQWtCLEVBQUUsQ0FBQztRQUNyQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzFCLFVBQVUsQ0FBQyxJQUFJLENBQUM7Z0JBQ2QsS0FBSyxFQUFFLEtBQUssR0FBRyxDQUFDO2dCQUNoQixJQUFJLEVBQUUsNFFBQTRRO2dCQUNsUixPQUFPLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLFdBQVMsQ0FBRyxDQUFDO2FBQzdDLENBQUMsQ0FBQztTQUNKO1FBRUQsSUFBSSxDQUFDLE9BQVEsQ0FBQyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsRUFBRTtZQUNwQyxLQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDckMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsaUJBQWlCLFlBQUMsU0FBaUI7UUFBbkMsaUJBWUM7UUFYQyxJQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDO1FBRTlDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBRTVDLElBQUksQ0FBQyxPQUFRLENBQUM7WUFDWixpQkFBaUIsRUFBRSxTQUFTO1NBQzdCLEVBQUU7WUFFRCxLQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDN0MsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsY0FBYyxZQUFDLENBQU07UUFDbkIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVELFlBQVk7UUFDVixJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMxRCxDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIElPcGVyYXtcbiAgcmVhZG9ubHkgbGluazogc3RyaW5nO1xuICByZWFkb25seSB0aXRsZTogc3RyaW5nO1xuICByZWFkb25seSBjb250ZXh0OiB3eC5WaWRlb0NvbnRleHQ7XG59XG5cbmludGVyZmFjZSBJUGFnZURhdGEge1xuICBvcGVyYXM6IEFycmF5PElPcGVyYT47XG4gIGN1cnJlbnRPcGVyYUluZGV4OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBJUGFnZSB7XG4gIGRhdGE6IElQYWdlRGF0YTtcbiAgb25Td2lwZXJDaGFuZ2UoZTogYW55KTogdm9pZDtcbiAgb25WaWRlb0VuZGVkKCk6IHZvaWQ7XG4gIHN3aXRjaFRvTmV4dFZpZGVvKG5leHRJbmRleDogbnVtYmVyKTogdm9pZDtcbn1cblxuUGFnZTxJUGFnZURhdGEsIElQYWdlPih7XG4gIG9uU2hhcmVBcHBNZXNzYWdlKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogJ+WQrOS4quaIj+WQpycsXG4gICAgICBwYXRoOiAncGFnZXMvbWFpbidcbiAgICB9XG4gIH0sXG5cbiAgZGF0YToge1xuICAgIGN1cnJlbnRPcGVyYUluZGV4OiAwLFxuICAgIG9wZXJhczogW11cbiAgfSxcblxuICBvbkxvYWQoKSB7XG4gICAgLy8gZmV0Y2ggYSBwYWdlXG4gICAgY29uc3QgaW5pdE9wZXJhczogQXJyYXk8SU9wZXJhPiA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICBpbml0T3BlcmFzLnB1c2goe1xuICAgICAgICB0aXRsZTogJ+m7hOaiheaIjycgKyBpLFxuICAgICAgICBsaW5rOiAnaHR0cDovL3d4c25zZHkudGMucXEuY29tLzEwNS8yMDIxMC9zbnNkeXZpZGVvZG93bmxvYWQ/ZmlsZWtleT0zMDI4MDIwMTAxMDQyMTMwMWYwMjAxNjkwNDAyNTM0ODA0MTAyY2E5MDVjZTYyMGIxMjQxYjcyNmJjNDFkY2ZmNDRlMDAyMDQwMTI4ODI1NDA0MDAmYml6aWQ9MTAyMyZoeT1TSCZmaWxlcGFyYW09MzAyYzAyMDEwMTA0MjUzMDIzMDIwNDEzNmZmZDkzMDIwNDU3ZTNjNGZmMDIwMjRlZjIwMjAzMWU4ZDdmMDIwMzBmNDI0MDAyMDQwNDVhMzIwYTAyMDEwMDA0MDAnLFxuICAgICAgICBjb250ZXh0OiB3eC5jcmVhdGVWaWRlb0NvbnRleHQoYG9wZXJhLSR7aX1gKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXREYXRhISh7IG9wZXJhczogaW5pdE9wZXJhcyB9LCAoKSA9PiB7XG4gICAgICB0aGlzLmRhdGEub3BlcmFzWzBdLmNvbnRleHQucGxheSgpO1xuICAgIH0pO1xuICB9LFxuXG4gIHN3aXRjaFRvTmV4dFZpZGVvKG5leHRJbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgcHJldkluZGV4ID0gdGhpcy5kYXRhLmN1cnJlbnRPcGVyYUluZGV4O1xuICAgIC8vIOWBnOatouS4iuS4gOmhteeahOinhumikVxuICAgIHRoaXMuZGF0YS5vcGVyYXNbcHJldkluZGV4XS5jb250ZXh0LnNlZWsoMCk7XG4gICAgdGhpcy5kYXRhLm9wZXJhc1twcmV2SW5kZXhdLmNvbnRleHQucGF1c2UoKTtcblxuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgY3VycmVudE9wZXJhSW5kZXg6IG5leHRJbmRleFxuICAgIH0sICgpID0+IHtcbiAgICAgIC8vIOW8gOWni+W9k+WJjemhteeahOinhumikVxuICAgICAgdGhpcy5kYXRhLm9wZXJhc1tuZXh0SW5kZXhdLmNvbnRleHQucGxheSgpO1xuICAgIH0pO1xuICB9LFxuXG4gIG9uU3dpcGVyQ2hhbmdlKGU6IGFueSkge1xuICAgIHRoaXMuc3dpdGNoVG9OZXh0VmlkZW8oZS5kZXRhaWwuY3VycmVudCk7XG4gIH0sXG5cbiAgb25WaWRlb0VuZGVkKCkge1xuICAgIHRoaXMuc3dpdGNoVG9OZXh0VmlkZW8odGhpcy5kYXRhLmN1cnJlbnRPcGVyYUluZGV4ICsgMSk7XG4gIH1cbn0pXG4iXX0=